<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>LaunchCode&#039;s CS50x - Maryville</title>

        <link rel="stylesheet" href="http://education.launchcode.org/cs50x-maryville/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://education.launchcode.org/cs50x-maryville/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://education.launchcode.org/cs50x-maryville/css/highlight.dark.css">
        <link rel="stylesheet" href="http://education.launchcode.org/cs50x-maryville/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="http://education.launchcode.org/cs50x-maryville/">
                LaunchCode&#039;s CS50x - Maryville
            </a>

        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="">
                                    <a href="http://education.launchcode.org/cs50x-maryville/calendar/">
                                        Calendar
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="http://education.launchcode.org/cs50x-maryville/how-to-take-this-class/">
                                        How To Take This Class
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="http://education.launchcode.org/cs50x-maryville/helpful-resources/">
                                        Helpful Resources
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="http://cs50.io/">
                                        CS50 IDE
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://labs.vocareum.com/home/login.php">
                                        Vocareum
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="http://piazza.com/link-to-maryville-piazza-page">
                                        Piazza
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://docs.google.com/document/d/1TiS8pmVkEu96BC7-wC-qSueIi8RDIZcRg700w4gqmf0/edit?usp=sharing">
                                        Student Guide
                                    </a>
                                </li>
                                                    </ul>

                    </nav>

                
                <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="module-8-source-code">Module 8 Source Code</h1>
<p>You will find the source code for the follow-alongs that you will complete during Module 8.  We have provided links to all of the files for CS50, so you will have access to some other files that we have not included in our curriculum. We highly recommend that you try to complete them on your own before you look at the code.  </p>
<p><a href="http://cdn.cs50.net/2015/fall/lectures/9/m/src9m/" target="_blank"><b>Lecture: Week 9 Source Code</b></a></p>
<p><a href="http://cdn.cs50.net/2015/fall/lectures/9/w/src9w/" target="_blank"><b>Lecture: Week 9, continued Source Code</b></a></p>
<h2 id="prep-for-class-1">Prep for Class 1</h2>
<h4 id="dom-0">dom-0</h4>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;script&gt;

            function greet()
            {
                alert('hello, ' + document.getElementById('name').value + '!');
            }

        &lt;/script&gt;
        &lt;title&gt;dom-0&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form id="demo" onsubmit="greet(); return false;"&gt;
            &lt;input id="name" placeholder="Name" type="text"/&gt;
            &lt;input type="submit"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="dom-1">dom-1</h4>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;dom-1&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form id="demo"&gt;
            &lt;input id="name" placeholder="Name" type="text"/&gt;
            &lt;input type="submit"/&gt;
        &lt;/form&gt;
        &lt;script&gt;

            document.getElementById('demo').onsubmit = function() {
                alert('hello, ' + document.getElementById('name').value + '!');
                return false;
            };

        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="dom-2">dom-2</h4>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;script src="https://code.jquery.com/jquery-latest.min.js"&gt;&lt;/script&gt;
        &lt;script&gt;

            $(document).ready(function() {
                $('#demo').submit(function(event) {
                    alert('hello, ' + $('#name').val() + '!');
                    event.preventDefault();
                });
            });

        &lt;/script&gt;
        &lt;title&gt;dom-2&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form id="demo"&gt;
            &lt;input id="name" placeholder="Name" type="text"/&gt;
            &lt;input type="submit"/&gt;
        &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="form-0">form-0</h4>
<pre><code class="language-html">&lt;!--

form-0.html

A form without client-side validation.

David J. Malan
malan@harvard.edu

--&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;form-0&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action="register.php" method="get"&gt;
            Email: &lt;input name="email" type="text"/&gt;
            &lt;br/&gt;
            Password: &lt;input name="password" type="password"/&gt;
            &lt;br/&gt;
            Password (again): &lt;input name="confirmation" type="password"/&gt;
            &lt;br/&gt;
            I agree to the terms and conditions: &lt;input name="agreement" type="checkbox"/&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;input type="submit" value="Register"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="form-1">form-1</h4>
<pre><code class="language-html">&lt;!--

form-1.html

A form with client-side validation.

David J. Malan
malan@harvard.edu

--&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;form-1&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action="register.php" id="registration" method="get"&gt;
            Email: &lt;input name="email" type="text"/&gt;
            &lt;br/&gt;
            Password: &lt;input name="password" type="password"/&gt;
            &lt;br/&gt;
            Password (again): &lt;input name="confirmation" type="password"/&gt;
            &lt;br/&gt;
            I agree to the terms and conditions: &lt;input name="agreement" type="checkbox"/&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;input type="submit" value="Register"/&gt;
        &lt;/form&gt;
        &lt;script&gt;

            var form = document.getElementById('registration');

            // onsubmit
            form.onsubmit = function() {

                // validate email
                if (form.email.value == '')
                {
                    alert('You must provide your email address!');
                    return false;
                }

                // validate password
                else if (form.password.value == '')
                {
                    alert('You must provide a password!');
                    return false;
                }

                // validate confirmation
                else if (form.password.value != form.confirmation.value)
                {
                    alert('Passwords do not match!');
                    return false;
                }

                // validate agreement
                else if (!form.agreement.checked)
                {
                    alert('You must agree to the terms and conditions!');
                    return false;
                }

                // valid!
                return true;

            };

        &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="form-2">form-2</h4>
<pre><code class="language-html">&lt;!--

form-2.html

A form with client-side validation using jQuery.

David J. Malan
malan@harvard.edu

--&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;script src="https://code.jquery.com/jquery-latest.min.js"&gt;&lt;/script&gt;
        &lt;script&gt;

            // onready
            $(document).ready(function() {

                // onsubmit
                $('#registration').submit(function() {

                    // validate email
                    if ($('#registration input[name=email]').val() == '')
                    {
                        alert('You must provide your email address!');
                        return false;
                    }

                    // validate password
                    else if ($('#registration input[name=password]').val() == '')
                    {
                        alert('You must provide a password!');
                        return false;
                    }

                    // validate confirmation
                    else if ($('#registration input[name=password]').val() != $('#registration input[name=confirmation]').val()) 
                    {
                        alert('Passwords do not match!');
                        return false;
                    }

                    // validate agreement
                    else if (!$('#registration input[name=agreement]').is(':checked')) 
                    {
                        alert('You must agree to the terms and conditions!');
                        return false;
                    }

                    // valid!
                    return true;

                });

            });

        &lt;/script&gt;
        &lt;title&gt;form-2&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action="register.php" id="registration" method="get"&gt;
            Email: &lt;input name="email" type="text"/&gt;
            &lt;br/&gt;
            Password: &lt;input name="password" type="password"/&gt;
            &lt;br/&gt;
            Password (again): &lt;input name="confirmation" type="password"/&gt;
            &lt;br/&gt;
            I agree to the terms and conditions: &lt;input name="agreement" type="checkbox"/&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;input type="submit" value="Register"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="prep-for-class-2">Prep for Class 2</h2>
<h4 id="quotephp">quote.php</h4>
<pre><code class="language-php">&lt;?php

    // require ?symbol=...
    if (empty($_GET["symbol"]))
    {
        trigger_error("Missing symbol", E_USER_ERROR);
    }

    // headers for proxy servers
    $headers = [
        "Accept" =&gt; "*/*",
        "Connection" =&gt; "Keep-Alive",
        "User-Agent" =&gt; sprintf("curl/%s", curl_version()["version"])
    ];

    // open connection to Yahoo
    $context = stream_context_create([
        "http" =&gt; [
        "header" =&gt; implode(array_map(function($value, $key) { return sprintf("%s: %s\r\n", $key, $value); }, $headers, array_keys($headers))),
        "method" =&gt; "GET"
        ]
    ]);
    $handle = fopen("http://download.finance.yahoo.com/d/quotes.csv?f=snl1&amp;s={$_GET["symbol"]}", "r", false, $context);
    if ($handle === false)
    {
        trigger_error("Could not connect to Yahoo!", E_USER_ERROR);
    }

    // download first line of CSV file
    $data = fgetcsv($handle);
    if ($data === false || count($data) == 1)
    {
        trigger_error("Missing data", E_USER_ERROR);
    }

    // close connection to Yahoo
    fclose($handle);

    // ensure symbol was found
    if ($data[2] === "0.00")
    {
        trigger_error("Missing price", E_USER_ERROR);
    }

    // prepare stock as an associative array
    $stock = [
        "symbol" =&gt; $data[0],
        "name" =&gt; $data[1],
        "price" =&gt; floatval($data[2])
    ];

    // output stock as JSON
    header("Content-Type: application/json");
    print(json_encode($stock));

?&gt;</code></pre>
<h4 id="ajax-0">ajax-0</h4>
<pre><code class="language-html">&lt;!--

ajax-0.html

Gets stock quote from quote.php via Ajax with jQuery, displaying price with alert.

David J. Malan
malan@harvard.edu

--&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;script src="https://code.jquery.com/jquery-latest.min.js"&gt;&lt;/script&gt;
        &lt;script&gt;

            /**
             * Gets a quote via JSON.
             */
            function quote()
            {
                var url = 'quote.php?symbol=' + $('#symbol').val();
                $.getJSON(url, function(data) {
                    alert(data.price);
                });
            }

        &lt;/script&gt;
        &lt;title&gt;ajax-0&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form onsubmit="quote(); return false;"&gt;
            Symbol: &lt;input autocomplete="off" autofocus id="symbol" type="text"/&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;input type="submit" value="Get Quote"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="ajax-1">ajax-1</h4>
<pre><code class="language-html">&lt;!--

ajax-1.html

Gets stock quote from quote.php via Ajax with jQuery, displaying price with alert.

David J. Malan
malan@harvard.edu

--&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;script src="https://code.jquery.com/jquery-latest.min.js"&gt;&lt;/script&gt;
        &lt;script&gt;

            $(function() {

                $('#quote').submit(function() {

                    var url = 'quote.php?symbol=' + $('#symbol').val();
                    $.getJSON(url, function(data) {
                        alert(data.price);
                    });
                    return false;

                });

            });

        &lt;/script&gt;
        &lt;title&gt;ajax-1&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form id="quote"&gt;
            Symbol: &lt;input autocomplete="off" autofocus id="symbol" type="text"/&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;input type="submit" value="Get Quote"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="ajax-2">ajax-2</h4>
<pre><code class="language-html">&lt;!--

ajax-2.html

Gets stock quote from quote.php via Ajax with jQuery, embedding result in page itself.

David J. Malan
malan@harvard.edu

--&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;script src="https://code.jquery.com/jquery-latest.min.js"&gt;&lt;/script&gt;
        &lt;script&gt;

            /**
             * Gets a quote via JSON.
             */
            function quote()
            {
                var url = 'quote.php?symbol=' + $('#symbol').val();
                $.getJSON(url, function(data) {
                    $('#price').html(data.price);
                });
            }

        &lt;/script&gt;
        &lt;title&gt;ajax-2&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form onsubmit="quote(); return false;"&gt;
            Symbol: &lt;input autocomplete="off" autofocus id="symbol" type="text"/&gt;
            &lt;br/&gt;
            Price: &lt;span id="price"&gt;to be determined&lt;/span&gt;
            &lt;br/&gt;&lt;br/&gt;
            &lt;input type="submit" value="Get Quote"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                </section>

            </div>
        </main>

        <footer>
            <div class="container-fluid">
                <p class="text-muted">
                    website generated with <a href="http://couscous.io" title="Markdown website generator">Couscous</a>
                </p>
            </div>
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
